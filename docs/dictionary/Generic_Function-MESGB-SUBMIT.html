<head>
    <title>
        cl-gserver
        :
        Generic Function
        submit
    </title>
    <meta http-equiv="Content-Type"
          content="text/html"
          charset="UTF-8" />
    <link rel="stylesheet" href="../helambdap.css" />
</head>
<body>
    <h1>
        <i>

            Generic Function
        </i>
        <strong>
            submit
        </strong>
    </h1>
    <h2>
        Package:
    </h2>
    <p>
        CL-GSERVER.MESSAGEB
    </p>
    <h2>
        Syntax:
    </h2>
    <div>
        <p>
            <pre>
  <strong style="color: red">submit</strong> <i>MESSAGE-BOX-BASE</i> <i>MESSAGE</i> <i>WITHREPLY-P</i> <i>TIME-OUT</i> <i>HANDLER-FUN</i> &rarr; <i>result</i></pre>
        </p>
    </div>
    <h3>
        Arguments and Values:
    </h3>
    <ul style="list-style-type: none">
        <li style="list-style-type: none">
            <i>
                <code>
                    MESSAGE-BOX-BASE
                </code>
            </i>
             :
            a
            T
        </li>
        <li style="list-style-type: none">
            <i>
                <code>
                    MESSAGE
                </code>
            </i>
             :
            a
            T
        </li>
        <li style="list-style-type: none">
            <i>
                <code>
                    WITHREPLY-P
                </code>
            </i>
             :
            a
            T
        </li>
        <li style="list-style-type: none">
            <i>
                <code>
                    TIME-OUT
                </code>
            </i>
             :
            a
            T
        </li>
        <li style="list-style-type: none">
            <i>
                <code>
                    HANDLER-FUN
                </code>
            </i>
             :
            a
            T
        </li>
        <li style="list-style-type: none">
            <i>
                <code>
                    result
                </code>
            </i>
             : a T.
        </li>
    </ul>
    <h2>
        Description:
    </h2>
    <p>
        Submit a message to the mailbox to be queued and handled.
    </p>
    <div>
        <h2>
            Known Documented Methods:
        </h2>
        <ol>
            <li>
                <p>
                    <pre>
 <strong>submit</strong>  <i>&lt;MESSAGE-BOX/BT&gt;</i> <i>MESSAGE</i> <i>WITHREPLY-P</i> <i>TIME-OUT</i> <i>HANDLER-FUN</i> &rarr; <i>result</i></pre>
                </p>
                <p>
                    <p>
                        Alternatively use `with-submit-handler' from your code to handle the message after it was 'popped' from the queue.
The `handler-fun' argument here will be `funcall'ed when the message was 'popped'.
                    </p>
                </p>
            </li>
            <li>
                <p>
                    <pre>
 <strong>submit</strong>  <i>&lt;MESSAGE-BOX/DP&gt;</i> <i>MESSAGE</i> <i>WITHREPLY-P</i> <i>TIME-OUT</i> <i>HANDLER-FUN</i> &rarr; <i>result</i></pre>
                </p>
                <p>
                    <p>
                        Submitting a message on a multi-threaded `dispatcher' is different as submitting on a single threaded message-box.
On a single threaded message-box the order of message processing is guaranteed even when submitting from multiple threads.
On the `dispatcher' this is not the case. The order cannot be guaranteed when messages are processed by different 
`dispatcher' threads. However, we still guarantee a 'single-threadedness' regarding the state of the actor.
This is archieved here by protecting the `handler-fun' executation by a lock.
                    </p>
                    <p>
                        The `time-out' with the 'dispatcher mailbox' assumes that the message received the dispatcher queue
and the handler in a reasonable amount of time, so that the effective time-out applies on the actual
handling of the message on the dispatcher queue thread.
                    </p>
                    <p>
                        !!! attention: the `async-ask' uses no reply (here a `dispatch-async').
                    </p>
                </p>
            </li>
        </ol>
    </div>
</body>